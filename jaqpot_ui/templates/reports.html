{% extends "base.html" %}

{% block content %}

<div class="div-table" style="width:100%;">
    {% load endless %}
        <div>
             <h1>Reports:</h1>

             {% paginate 20 report %}
             <div class="list-group">
                 <p class="list-group-item" style="background-color:#cf2323; border-color:#cf2323;width:95%">Name <span style="float: left; left:20%; position:absolute;">Comments</span> <span style="float: left; left:50%; position:absolute;">Description</span> </p>
                 {% for r in report %}

                    <a href="/report?name={{r.id}}" class="list-group-item" style="width:95%;float:left;">{{r.id}}<span class="overflow-span" style="float: left; left:20%; position:absolute;width:20%;">{{r.meta.comments.0}}</span> <span class="overflow-span" style="float: left; left:50%; position:absolute;width:50%;">{%for desc in d.meta.descriptions%}{{desc}}{% if desc %}{% if not forloop.last %}, {%endif%}{%else%} {% endif %}{% endfor %}</span> </a>
                    <button class="btn bt-red" data-toggle="tool" title="Delete Report" style="margin: 4px;" onclick="deleteReport('{{r.id}}')"><i class="glyphicon glyphicon-remove-sign"></i></button>
                 {% endfor %}
             </div>

         {% get_pages %}
         <div id="pageNavPosition" class="pagination">
             <span class="step-links">
                    <ul class="pagination">

                        <li class="active">
                            {% if page|add:"0" >= 2 %}
                            <a href="/reports?page={{page|add:-1}}">Previous</a>
                            {% else %}
                            <a href="/reports?page={{page}}">Previous</a>
                            {%endif %}
                        </li>

                        {% if page|add:-1 >= 1 %}
                        <li><a href="/data?page=1">1</a></li>
                        {% endif %}
                        {% if page|add:-2 > 1%}
                        <li><a><strong>...</strong></a></li>
                        {% endif%}
                        {% if page|add:-1 > 1%}
                        <li><a href="/reports?page={{page|add:-1}}">{{page|add:-1}}</a></li>
                        {% endif %}
                        <li><a href="/reports?page={{page}}"><strong>{{page}}</strong></a></li>

                         {% if page|add:"1" < last%}
                        <li><a href="/reports?page={{page|add:1}}">{{page|add:1}}</a></li>
                        {% endif %}
                        {% if page|add:"2" < last%}
                        <li><a><strong>...</strong></a></li>
                        {% endif%}
                         {% if page|add:1 <= last %}
                        <li><a href="/reports?page={{last}}">{{last}}</a></li>
                        {% endif %}

                        <li class="active">
                            {% if page|add:1 > last %}
                                    <a href="/reports?page={{last}}">Next</a>
                            {%else%}
                                <a href="/reports?page={{page|add:1 }}">Next </a>
                            {% endif %}
                        </li>

                   </ul>
                </span>
         </div>

        </div>
</div>

<script>
//display tooltip right
$('[data-toggle="tool"]').tooltip({
    'placement': 'top'
});

function deleteReport(name) {
            if (confirm("Are you sure?")) {
                // your deletion code
                window.location="/report_delete?id="+name
            }
            return false;
}
</script>
{% endblock %}