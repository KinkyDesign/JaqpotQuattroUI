{% extends "base.html" %}

{% block content %}
<form method="post" id="form1" enctype="multipart/form-data"> {% csrf_token %}
<div class="div-table" style="width:100%; display: inline-block; padding:10px;">
    <a id="back" class="btn bt-red" style="width:3%;" ><i class="glyphicon glyphicon-circle-arrow-left"></i></a>
    <br>
    <div style="float:left; width:50%;">
            <h1>Algorithm</h1>
            <h3>Title: {{algorithms}}</h3>
            {% if al.meta.titles %}
                <div>
                    <label class="align">Title:</label>
                    <input type="text" style="margin:5px;width:40%;" readonly="readonly" value="{{al.meta.titles.0}}">
                </div>
            {% endif %}
            {% if al.publisher %}
                <div>
                    <label class="align">Publisher:</label>
                    <input type="text" style="margin:5px;" value="{{al.publisher}}">
                </div>
            {% endif %}
            {% if al.contributor %}
                <div>
                    <label class="align">Contributor:</label>
                    <input type="text" style="margin:5px;" value="{{al.contributor}}">
                </div>
            {% endif %}
            {% if al.date %}
                <div>
                    <label class="align">Date:</label>
                    <input type="text" style="margin:5px;" value="{{al.date}}">
                </div>
            {% endif %}
            {% if al.parameters %}
                <h6><b>Parameters:</b></h6>
                 {% for p in al.parameters%}
                    <div>
                        <label class="align">{{p.name}}:</label>
                        <input type="text" name="{{p.name}}" style="margin:5px;" value="{{p.value}}">
                        <input type="text" name="parameters" style="margin:5px;display:none;" value="{{p.name}}">
                    </div>
                 {% endfor %}
            {% endif %}
            {% if al.rights %}
                <p><b>Copyright:</b></p>
                <textarea class="form-control" rows="3" readonly="readonly" style="margin:5px;">{{al.info.rights}}

                </textarea>
            {% endif %}
        <br>
         <h3>Fill in the title and description of the produced model</h3>
        <div>
            <label class="align" >Model name:</label>
            <input type="text" name="title" class="align">
        </div>
        <br>
         <p><b>Model description:</b></p>
        <textarea class="form-control" name="description" style="width:30%;" rows="6"></textarea>

    </div>
    <div style="float:right; width:50%;">
        <h5>Select variables (optional):</h5>
        <input type="radio" name="radio_pmml" id="pmml1" value="input"> Select Input variable and endpoint<br>
        <input type="radio" name="radio_pmml" id="pmml2" value="pm" >Select PMML<br>
        <input type="radio" name="radio_pmml" id="pmml3" value="file">Upload PMML file<br>
        <input type="radio" name="radio_pmml" id="pmml4" value="none" checked >None
        </div>

    <div id="input" style="float:right; width:50%; border: 3px solid #cf2323;padding:5px;margin:0 0 5px; border-radius:5px;display:none;">

        <h5><input type="radio" name="radio1" value="I/O" style="display:none;">Select Input variable and endpoint:</h5>
        <div style="float:left; width:50%;">
        <h5>Input</h5>
                <input type="checkbox" name="selectallfeatures" id= "selectallfeatures" ><b>Select All</b>
        <div style="overflow:scroll; height:300px;">

            {% for f in features %}
                 <label class="algorithms" style="border: 1px solid #ccc;padding:5px;margin:0 0 5px;display:block; width:99%;">
                    <input type="checkbox" name="radio_input" class="input" value="{{f.uri}}">{{f.name}}</label>
            {% endfor %}
            </div>

            </div>
        <div style="float:left; width:50%">
        <h5>Output</h5>
           <br>
        <div style="overflow:scroll; height:300px;">
               {% for f in features %}
                 <label class="algorithms" style="border: 1px solid #ccc;padding:5px;margin:0 0 5px;display:block; width:99%;">
                    <input type="radio" name="radio_output" value="{{f.uri}}">{{f.name}}</label>
            {% endfor %}
            </div>

            </div>
    </div>
    <div id="PMML" style="float:right; width:50%; border: 3px solid #cf2323;padding:5px;margin:0 0 5px; border-radius:5px;display:none;">

        <div>
            <h5><input type="radio" name="radio1" value="PMML" style="display:none;">Select PMML:</h5>
            <select name="pmml_file">
                {% if not pmml %}
                 <option value="">no pmml</option>
                {% else %}
                {% for p in pmml %}
                  <option value="{{p.id}}">{{p.id}}</option>
                {% endfor %}
                {% endif %}
            </select>
            <br>
        </div>
        <div>
            <h5>Select Prediction Feature:</h5>
            <select name="prediction_feature">
                {% for f in features %}
                  <option value="{{f.uri}}">{{f.name}}</option>
                {% endfor %}
            </select>
            <br>
        </div>
    </div>
    <div id="file" style="float:right; width:50%; border: 3px solid #cf2323;padding:5px;margin:0 0 5px; border-radius:5px;display:none;">

        <h5><input type="radio" name="radio1" value="PMML file" style="display:none;">Upload a PMML with transformations(optional):</h5>{{uploadform.file}}
        <h5>Select Prediction Feature:</h5>
            {{uploadform.feature}}

    </div>
     <div id="none" style="float:right; width:50%; border: 3px solid #cf2323;padding:5px;margin:0 0 5px; border-radius:5px;">

        <h5>Select Prediction Feature:</h5>
        <select name="prediction_feature">
            {% for f in features %}
            <option value="{{f.uri}}">{{f.name}}</option>
            {% endfor %}
        </select>

    </div>
    <br>
    <br>
    <div style="float:right; width:50%;">
        <h3>Select scaling method:</h3>
        {{tform.scaling}}
        <h3>Select domain of applicability method:</h3>
        {{tform.doa}}
        <br>
        <br>
         <!-- <a href="/change_params?data={{dataset}}&alg={{algorithms}}" class="btn bt-red" style="width:10%; float:left; left:10%;" >Train</a> -->
        {% if error %}
            <h6 style="color:red">{{error}}</h6>
        {% endif %}
        <input id="choose_alg" type="submit" value="Train" class="btn bt-red" style="width: 10%; float:left; left:10%;">
    </div>

    </div>
</form>

<script>

     $("select").selecter();
     $('#pmml1').click(function() {
            $("#input").show();
            $("#file").hide();
            $("#PMML").hide();
            $("#none").hide();
     });
     $('#pmml2').click(function() {
            $("#input").hide();
            $("#file").hide();
            $("#PMML").show();
            $("#none").hide();
     });
      $('#pmml3').click(function() {
            $("#input").hide();
            $("#file").show();
            $("#PMML").hide();
            $("#none").hide();
     });
     $('#pmml4').click(function() {
            $("#input").hide();
            $("#file").hide();
            $("#PMML").hide();
            $("#none").show();
     });
     $('#back').click(function(event) {
       history.go(-1);
     });

   $(document).ready(function() {
    $('#selectallfeatures').click(function(event) {  //on click
        if(this.checked) { // check select status
            $('.input').each(function() { //loop through each checkbox
                this.checked = true;  //select all checkboxes with class "checkbox1"
            });
        }else{
            $('.input').each(function() { //loop through each checkbox
                this.checked = false; //deselect all checkboxes with class "checkbox1"
            });
        }
    });

});
</script>

{%endblock%}