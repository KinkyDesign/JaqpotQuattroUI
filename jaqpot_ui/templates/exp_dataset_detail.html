{% extends "base.html" %}

{% load templates_extras %}

{% block content %}

<div class="div-table" style="width:100%; min-height:650px; ">
    <div>
        <div style= "float:left;"></div>
        <div style="float:right;">
            <a href="/d_delete?id={{name}}" class="btn bt-red" data-toggle="tool" title="Delete Dataset" style="margin: 3px;"><i class="glyphicon glyphicon-remove-sign"></i></a>
        </div>
    </div>

    <div>
        <div>
            <h1>Dataset: <span  style="font-size: 20px;">{{data_detail.meta.titles.0}}</span> <span style="font-size: 12px;">#{{dataset_name}}</span> </h1>
        </div>
        <br>
        {% if model.additionalInfo|get_key:'r.squared'%}

            <div>
                <label class="align">Rsquared:</label>
                <input type="text" style="margin:5px;width:40%;" readonly="readonly" value="{{model.additionalInfo|get_key:'r.squared'}}">
            </div>
            <span style="font-size: 10px;margin-left: 10%;"><b>Help note:</b>Rsquared greater or equal to Rsquared threshold</span>

        {% endif %}
        <div>
            {% for k,v in model.additionalInfo.items %}
            {% if k == "norm.var" %}
                    <div>
                        <label class="align">Normalised variance:</label>
                        <input type="text" style="margin:5px;width:40%;" readonly="readonly" value="{{v.0}}">
                    </div>
                    <span style="font-size: 10px;margin-left: 10%;"><b>Help note:</b>Minimax normalised variance over input matrix.</span>
            {% endif %}
            {% endfor %}
            {% for k,v in model.additionalInfo.items %}
            {% if k == "confounding.effect" %}
                    <div>
                        <label class="align">Confounding effect:</label>
                        <input type="text" style="margin:5px;width:40%;" readonly="readonly" value="{{v.0}}">
                    </div>
                    <span style="font-size: 10px;margin-left: 10%;"><b>Help note:</b>The diagonality of the design.</span>
            {% endif %}
            {% endfor %}
            {% for k,v in model.additionalInfo.items %}
            {% if k == "verbal.notes" %}
                    <p><b>Notes:</b></p>
                    <textarea class="form-control" rows="3" readonly="readonly" style="margin:5px;width:50%;">{% for note in v %}
                        {{note}}{% endfor %}
                         </textarea>
            {% endif %}
            {% endfor %}
        </div>

        <input type="search" id="search1" onsearch="myFunction()" style="display:none">

    </div>


    <div id="details">

         <table id="dataset" class="div-form-table display" >
             <thead>
                 <tr>

                     <th style="background-color: #cf2323; min-width: 300px;">Compounds</th>
                       <th style="background-color: #cf2323;" class="column">
                            <p>{{predicted.0}}</p>
                       </th>
                       <th style="background-color: #cf2323;" class="column">
                            <p>Prediction feature</p>
                       </th>
                 </tr>
             </thead>
             <tbody>
             {% for key in data_detail.dataEntry%}
                    <tr>
                        <td>{{key.compound.name}}</td>
                        {% for k,v in key.values.items %}
                            {% if k == predicted.0%}
                                <td>{{v}}</td>
                            {% endif %}
                            {% if k == prediction %}
                                <td>{{v}}</td>
                            {% endif %}

                        {% endfor%}

                    </tr>
             {% endfor %}

             </tbody>
         </table>
        <br>

    </div>
    <input type="submit" id="exp" value="Experimental Design" class="btn bt-red" style="width: 20%;">
    <!-- <div id="dialog-confirm" title="Empty the recycle bin?">
      <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
    </div> -->


</div>

<script>
    var DATASET_NAME = '{{dataset_name}}';
    //var THRESHOLD = '{{params|get_key:'r2.threshold'}}';
    var SQUARED = '{{model.additionalInfo|get_key:'r.squared'}}';
</script>
<script src="/static/js/exp_dataset_detail.js"></script>



{% endblock %}